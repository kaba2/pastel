Bug fights
==========

[[Parent]]: pastel.txt

This page documents experiences with fighting some non-obvious bugs.
The hope is that the next time such a bug happens, it is already documented
here.

Exception handling in MEX
-------------------------

There's something strange with exceptions in Matlab 2008a mex files.
I am throwing InvariantFailed object on a failed invariant check, which
is _not_ recognized on catching directly. However, it is recognized
by an ellipsis '...'. This leads to Matlab reporting a Standard exception.

When I had my C++ library call abort() on failed invariant, the Matlab
interpreted it as crashing. But now that I throw an exception, it can't
be properly handled. There are two things. In debug mode, a debug-only 
assertion is triggered.

Invalid MEX-file 'somefile.mexw32': The specified module could not be found.
----------------------------------------------------------------------------

### Description

I was trying to call a mex file from Matlab, but was stumped on the
given error message. However, I had just built the mex file, so the file
certainly was there.

### Cause

I had enabled OpenMp, but had not included 'omp.h'.

### Solution

I included 'omp.h' to proper places. I guess why this helps is that it 
also causes the OpenMp library to be linked in.



